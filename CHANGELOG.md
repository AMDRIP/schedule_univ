# Журнал изменений

Все заметные изменения в этом проекте будут задокументированы в этом файле.

## [3002.2811.2025] - 2025-11-28

### Исправлено
- **Нативный модуль**: Устранены ошибки компиляции C++ модуля `scheduler_native.node`.
    - Исправлено неправильное использование N-API для доступа к элементам массивов.
    - Все вхождения `arr[i].As<Napi::Object>()` заменены на `arr.Get(i).As<Napi::Object>()`.
    - Теперь модуль успешно компилируется с помощью `node-gyp rebuild`.

## [3000.2511.2025] - 2025-11-25

### Добавлено
- **Стартовый экран (Splash Screen)**: При запуске приложения теперь отображается анимированный приветственный экран с логотипом.
- **Планирование занятий**:
    - Добавлена возможность создавать детальный план для каждого занятия в расписании.
    - В карточке занятия появилась кнопка (иконка книги) для открытия редактора плана.
    - Можно указать тему занятия, содержание и домашнее задание.
    - Иконка меняет цвет, если план уже заполнен.
## [2991.2411.2025] - 2025-11-24

### Добавлено
- **C++ Акселерация**: Внедрен нативный модуль на C++ для ускорения генерации расписания.
    - Реализован алгоритм **Simulated Annealing** (Имитация отжига) для поиска более оптимальных решений.
    - Значительное повышение производительности при генерации расписания для больших объемов данных.
    - Автоматический fallback на JavaScript-реализацию, если нативный модуль недоступен.

### Улучшено
- **Рефакторинг кода**: Проведена масштабная реструктуризация кодовой базы.
    - Логика приложения вынесена в кастомный хук `useAppLogic`.
    - Файл типов `types.ts` разделен на модули (`enums`, `models`, `scheduling`) для улучшения поддерживаемости.

## [2990.2110.2025] - 2025-10-30

### Улучшено
- **Сводное расписание**: Внедрена строгая система валидации при ручном размещении занятий (drag-and-drop). Теперь система запрещает перетаскивание, если:
    - Преподаватель уже занят в это время в другой группе.
    - Выбранный слот является нерабочим днем по производственному календарю.
    - Время запрещено в сетке доступности преподавателя или группы.
- Визуальный интерфейс теперь корректно отображает доступность слотов при перетаскивании, подсвечивая только валидные варианты (зеленым — доступно, красным — запрещено).

## [2894.2010.2025] - 2025-10-29

### Изменено
- **CI/CD**: Автоматизирован процесс публикации релизов на GitHub. Теперь новые версии публикуются сразу в готовом виде, а не как черновики.

## [2889.2010.2025] - 2025-10-28

### Исправлено
- **Настройки**: Устранена ошибка, из-за которой модель OpenRouter не сохранялась при изменении в настройках. Теперь изменения применяются немедленно, без необходимости нажатия кнопки "Сохранить".

### Изменено
- **Настройки**: Модель OpenRouter по умолчанию изменена на `deepseek/deepseek-chat-v3.1:free` для улучшения качества и снижения стоимости генерации расписания.

## [2888.2010.2025] - 2025-10-27

### Добавлено
- **Настройка OpenRouter**: В "Настройках" добавлена возможность указать название модели, которую будет использовать планировщик OpenRouter. Это позволяет пользователям гибко выбирать между различными моделями (например, от Anthropic, OpenAI, Mistral) для экспериментов с качеством и стоимостью генерации. Модель `anthropic/claude-3-haiku` установлена по умолчанию.

## [2807.2010.2025] - 2025-10-26

### Исправлено
- **AI-планировщики**: Устранена проблема, при которой некоторые теги и типы аудиторий некорректно передавались в AI-планировщики, что могло приводить к ошибкам или неоптимальному выбору аудиторий в сгенерированном расписании.
- **Интерфейс**: Скорректировано отображение длинных названий дисциплин в модальных окнах для предотвращения "выпадения" текста.

## [2805.2010.2025] - 2025-10-25

### Добавлено
- **Эвристический планировщик**: Добавлена опция "Соблюдать порядок 'Сначала лекция, потом практика'", которая штрафует за неверный порядок занятий в течение одного дня.
- **Эвристический планировщик**: Добавлена опция "Строго распределять занятия по всему семестру", которая обеспечивает равномерное распределение нагрузки по неделям семестра.

## [2803.2010.2025] - 2025-10-24

### Исправлено
- **Нераспределенные занятия**: Устранена ошибка, из-за которой количество нераспределенных занятий для горизонтов "Неделя" и "2 недели" не обновлялось при переключении дат в календаре.
- **Перенос занятий**: Реализован корректный перенос "долга" по нераспределенным занятиям с предыдущих недель на текущую, обеспечивая актуальность списка при навигации.
- **Режим одной недели**: Скорректирована логика расчета для корректного отображения плана на две недели при отключенном режиме разделения на четные/нечетные недели.

## [2633.1910.2025] - 2025-10-23

### Улучшено
- **Производительность**: Оптимизирована производительность страницы "Сводное расписание". Теперь страница загружается значительно быстрее для ВУЗов с большим количеством учебных групп.

## [2599.1910.2025] - 2025-10-22

### Добавлено
- **Сводное расписание**: Добавлена новая страница "Сводное расписание", которая отображает занятия всех групп университета в единой сетке. Строки представляют группы, сгруппированные по курсам, а столбцы — дни недели и временные слоты.

### Исправлено
- **Дублирование занятий**: Устранена критическая ошибка, при которой размещение одного занятия в сетке приводило к его автоматическому дублированию на всех неделях (четных/нечетных или всех подряд), игнорируя счетчик пар и границы семестра. Теперь каждое занятие размещается как уникальное событие с конкретной датой.

## [2457.2110.2025] - 2025-10-21

### Добавлено
- **Итеративный эвристический планировщик**: Добавлен новый режим для эвристического планировщика, который выполняет несколько прогонов для поиска более оптимального решения.
- **Стохастический метод**: Базовый эвристический алгоритм был изменен для использования стохастического выбора, что позволяет ему избегать локальных минимумов и находить лучшие варианты расписания при многократных запусках.
- **Индикатор прогресса**: Во время работы итеративного планировщика в шапке приложения отображается прогресс выполнения.
- В модальное окно запуска эвристического планировщика добавлен слайдер для выбора количества итераций.

## [2456.1910.2025] - 2025-10-20

### Добавлено
- **Настройки установщика (NSIS)**: Для Windows добавлена возможность стандартной (не "тихой") установки приложения с выбором директории и созданием ярлыков. Это не влияет на автоматические обновления.

### Изменено
- Версия приложения обновлена до `2455.1910.2025` для отражения последних изменений.

## [2455.1910.2025] - 2025-10-19

### Изменено
- Обновлена версия приложения.

## [1.1910.2026] - 2025-10-19

### Исправлено
- Устранена ошибка публикации релиза, связанная с уже существующим тегом на GitHub. Версия приложения была увеличена для обеспечения успешной сборки и публикации.

## [1.1910.2025] - 2025-10-19

### Добавлено
- **Персональные страницы**: Для каждого преподавателя, факультета и кафедры добавлены личные страницы с подробной информацией. Доступ к ним осуществляется из соответствующих списков справочников.
- Обновление версии приложения и подготовка к релизу.

## [402.1710.2025] - 2025-10-17

### Добавлено
- В меню "Планировщик" добавлена опция "Сбросить состояние...", которая очищает текущее расписание. Это полезно для исправления потенциальных проблем с логикой после обновления приложения, когда расписание было создано в старой версии.
- Процесс сборки теперь автоматически очищает папку `dist` перед созданием новых файлов, чтобы избежать конфликтов со старыми артефактами.

## [401.1610.2025] - 2025-10-16

### Добавлено
- Улучшена производительность модуля отображения расписания.
- Обновлены внутренние зависимости для повышения стабильности.

## [319.1610.25] - 2024-07-29

### Добавлено
- Начальная версия приложения.
- Функционал управления основными справочниками: факультеты, кафедры, преподаватели, группы, аудитории, дисциплины.
- Интерактивный просмотрщик расписания с фильтрацией по группе и преподавателю.
- Ручное составление расписания с помощью drag-and-drop.
- Автоматическая генерация расписания с помощью эвристического алгоритма и ИИ-ассистента (Gemini).
- Система управления учебными планами.
- Настройка правил и ограничений для планировщика.
- Поддержка производственного календаря.
- Экспорт расписания в PDF и TXT, экспорт/импорт всех данных в JSON.
- Мастер первоначальной настройки проекта.
- Интегрирована система автоматического обновления приложения.
- Настроена автоматическая публикация релизов на GitHub.